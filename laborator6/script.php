<?php

require_once 'idiorm.php';
ORM::configure('sqlite:db.sqlite');

ORM::get_db()->exec('DROP TABLE IF EXISTS articles;');
ORM::get_db()->exec(
    'CREATE TABLE articles (' .
    'id INTEGER PRIMARY KEY AUTOINCREMENT, ' .
    'title TEXT, ' .
    'text TEXT)'
);

ORM::get_db()->exec('DROP TABLE IF EXISTS users;');
ORM::get_db()->exec(
    'CREATE TABLE users (' .
    'id INTEGER PRIMARY KEY AUTOINCREMENT, ' .
    'username VARCHAR(50), ' .
    'password VARCHAR(50), ' .
    'rights VARCHAR(50)' .
    ')'
);

function create_article($title, $contents)
{
    $article = ORM::for_table('articles')->create();
    $article->title = $title;
    $article->text = $contents;
    $article->save();
    return $article;
}

function create_user($username, $password, $rights)
{
    $user = ORM::for_table('users')->create();
    $user->username = $username;
    $user->password = $password;
    $user->rights = $rights;
    $user->save();
    return $user;
}

create_article("Poza","data:image/jpeg;base64,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" );
create_article('Some Article', 'lots of words in article 1');
create_article('Other Article', 'lots of words in article 2');
create_article('Different Article', 'lots of words in article 3');
create_article('Some Other Article', 'lots of words in article 4');
create_article('Some Different Other Article', 'lots of words in article 5');
create_article('Some Other Different Article', 'lots of words in article 6');
create_article('Some Article', 'lots of words in article 7');
create_article('Some Different Article', 'lots of words in article 8');
create_article('ceva','multe');
create_user('admin', 'admin', '*');
create_user('user', '8287458823facb8ff918dbfabcd22ccb', '1,3,5,7');
create_user('guest', '8287458823facb8ff918dbfabcd22ccb', '1');
create_user('matei', '8287458823facb8ff918dbfabcd22ccb', '2,4,6,8');
create_article('ceva','carti');
?>